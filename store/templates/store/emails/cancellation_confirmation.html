<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Order Cancellation Confirmation</title>
</head>

<body style="font-family: Arial, sans-serif; line-height: 1.6; color: #333;">
    <div style="max-width: 600px; margin: 20px auto; padding: 20px; border: 1px solid #ddd; border-radius: 5px;">
        <h2 style="color: #d9534f;">Order Cancelled: #{{ order.id }}</h2>
        <p>Hi {{ order.user.username }},</p>
        <p>This is to confirm that your cancellation request for order #{{ order.id }} has been approved. Your order has
            been successfully cancelled.</p>

        <!-- Refund ki jaankari (sirf agar refund hua hai toh) -->
        {% if refund_processed %}
        <div style="background-color: #f0f8ff; border-left: 4px solid #4682B4; padding: 15px; margin: 20px 0;">
            <h3 style="margin-top: 0; color: #4682B4;">Refund Processed</h3>
            <p>A refund of <strong>₹{{ order.total_amount }}</strong> has been initiated to your original payment
                method. Please allow 5-7 business days for the amount to reflect in your account.</p>
        </div>
        {% endif %}

        <h3>Cancelled Items Summary:</h3>
        <table style="width: 100%; border-collapse: collapse;">
            <thead>
                <tr style="background-color: #f2f2f2;">
                    <th style="padding: 8px; border: 1px solid #ddd; text-align: left;">Product</th>
                    <th style="padding: 8px; border: 1px solid #ddd; text-align: center;">Quantity</th>
                    <th style="padding: 8px; border: 1px solid #ddd; text-align: right;">Price</th>
                </tr>
            </thead>
            <tbody>
                {% for item in order.items.all %}
                <tr>
                    <td style="padding: 8px; border: 1px solid #ddd;">{{ item.product.name }}</td>
                    <td style="padding: 8px; border: 1px solid #ddd; text-align: center;">{{ item.quantity }}</td>
                    <td style="padding: 8px; border: 1px solid #ddd; text-align: right;">₹{{ item.price }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>

        <!-- Ab yeh message condition ke hisaab se dikhega -->
        {% if refund_processed %}
        <p style="margin-top: 20px;">We are sorry for any inconvenience this may have caused. We hope to serve you again
            soon!</p>
        {% else %}
        <p style="margin-top: 20px;">As this was a Cash on Delivery (COD) order, no payment was made, and therefore no
            refund is required. We are sorry for any inconvenience and hope to serve you again soon!</p>
        {% endif %}

        <p>Thanks,<br>The MyShop Team</p>
    </div>
</body>

</html>